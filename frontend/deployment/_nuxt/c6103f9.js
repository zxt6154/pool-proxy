(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{1198:function(t,e,n){"use strict";n.r(e);n(133),n(79),n(80);var r=n(20),c=n(3),o=n.n(c),l=[{title:"名称",dataIndex:"name"},{title:"当前可用代理数量",dataIndex:"validated_cnt"},{dataIndex:"in_db_cnt",slots:{title:"inDbCntTitle"}},{title:"总共爬取代理数量",dataIndex:"sum_proxies_cnt"},{title:"上次爬取代理数量",dataIndex:"last_proxies_cnt"},{title:"上次爬取时间",dataIndex:"last_fetch_date",customRender:function(t){return t?o()(t).format("YYYY-MM-DD HH:mm:ss"):""}},{dataIndex:"enable",slots:{title:"enableTitle"},scopedSlots:{customRender:"enable"}}],d={data:function(){return{fetchers:[],columns:l,autoupdate:!0,lastupdate:"",handle:null}},mounted:function(){var t=this;this.handle=setInterval((function(){t.autoupdate&&t.update()}),2e3),this.update()},destroyed:function(){this.handle&&clearInterval(this.handle),this.handle=null},methods:{update:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){var data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("/fetchers_status");case 2:data=e.sent,t.fetchers=data.fetchers,t.lastupdate=o()().format("HH:mm:ss");case 5:case"end":return e.stop()}}),e)})))()},clearStatus:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.$http.get("/clear_fetchers_status");case 2:return t.$message.success("清空成功"),e.next=5,t.update();case 5:case"end":return e.stop()}}),e)})))()},enableChange:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t.enable){n.next=5;break}return n.next=3,e.$http.get("/fetcher_enable",{name:t.name,enable:"0"});case 3:n.next=7;break;case 5:return n.next=7,e.$http.get("/fetcher_enable",{name:t.name,enable:"1"});case 7:return e.$message.success("修改成功"),n.next=10,e.update();case 10:case"end":return n.stop()}}),n)})))()}}},f=n(100),component=Object(f.a)(d,(function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("a-row",{attrs:{gutter:16}},[n("a-col",{attrs:{span:4}},[n("a-card",{attrs:{"body-style":{padding:"20px 24px 4px"}}},[n("p",[t._v("\n                    自动刷新:\n                    "),n("a-switch",{model:{value:t.autoupdate,callback:function(e){t.autoupdate=e},expression:"autoupdate"}})],1),t._v(" "),n("p",[t._v("刷新时间："+t._s(t.lastupdate))])])],1),t._v(" "),n("a-col",{attrs:{span:4}},[n("a-card",{attrs:{"body-style":{padding:"20px 24px 43px"}}},[n("div",{staticStyle:{"text-align":"center"}},[n("a-button",{attrs:{type:"primary"},on:{click:t.clearStatus}},[t._v("\n                        清空统计信息\n                    ")]),t._v(" "),n("a-tooltip",{attrs:{title:"清空`总共爬取代理数量`等，已经爬取到的代理不会删除"}},[n("a-icon",{attrs:{type:"question-circle"}})],1)],1)])],1)],1),t._v(" "),n("br"),t._v(" "),n("a-table",{attrs:{columns:t.columns,"data-source":t.fetchers,"row-key":"name",pagination:!1,bordered:!0},scopedSlots:t._u([{key:"enable",fn:function(e,r){return[n("a-switch",{attrs:{"default-checked":e},on:{change:function(e){return t.enableChange(r)}}})]}}])},[n("span",{attrs:{slot:"inDbCntTitle"},slot:"inDbCntTitle"},[t._v("\n            数据库中的代理数量\n            "),n("a-tooltip",{scopedSlots:t._u([{key:"title",fn:function(){return[n("span",[t._v("\n                        当前数据库中，有多少代理是这个爬取器爬到的。\n                        和`总共爬取代理数量`不同的地方在于，这个去掉了重复的和已经删除的代理。\n                    ")])]},proxy:!0}])},[t._v(" "),n("a-icon",{attrs:{type:"question-circle"}})],1)],1),t._v(" "),n("span",{attrs:{slot:"enableTitle"},slot:"enableTitle"},[t._v("\n            是否启用\n            "),n("a-tooltip",{scopedSlots:t._u([{key:"title",fn:function(){return[n("span",[t._v("\n                        在禁用之后，将不会再运行该爬取器。\n                    ")])]},proxy:!0}])},[t._v(" "),n("a-icon",{attrs:{type:"question-circle"}})],1)],1)])],1)}),[],!1,null,null,null);e.default=component.exports}}]);